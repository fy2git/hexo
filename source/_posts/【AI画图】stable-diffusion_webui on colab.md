---
abbrlink: ''
categories: []
date: '2023-04-12 09:34:37'
tags: []
title: ''
updated: Wed, 12 Apr 2023 01:34:39 GMT
---
| | stable-diffusion不再解释，当下火热的AI画图项目<br/> <br/>Colab 是谷歌提供的一种托管式 Jupyter 笔记本服务，只需要知道可以白piao他家的gpu即可。<br/> <br/> **准备工作**<br/> <br/>Windows+chromium内核浏览器<br/>因为是谷歌的服务，所以自行配置好网络环境，保正能上谷歌即可。<br/>【注意】断开后Colab将不能运行<br/> <br/>提前登录谷歌账号；GitHub账号；GoogleDrive<br/>提前下载<br/>https://huggingface.co/stabilityai/sd-vae-ft-mse-original/blob/main/vae-ft-mse-840000-ema-pruned.ckpt<br/>将其上传至GoogleDrive根目录（最好复制一份作为备份）<br/> <br/>收藏并以GitHub登录https://civitai.com/<br/>以便后续使用（开启NSFW，找提示词等）<br/> <br/>stable-diffusion\_webui使用的是这个项目【以下简称SDwebui】<br/>https://github.com/camenduru/stable-diffusion-webui-colab<br/>个人现在使用的是这个<br/>https://colab.research.google.com/github/camenduru/stable-diffusion-webui-colab/blob/main/stable/stable\_diffusion\_v2\_1\_webui\_colab.ipynb<br/> ![](https://img.722227.xyz/file/3e7f670826a8b26c40c13.jpg)<br/> <br/> **准备工作完毕，开始搭建环境**<br/>打开colab（上面的那个链接）和civitai<br/> ![](https://img.722227.xyz/file/e9fe97241024df1bb3bce.jpg)<br/> <br/>此时应该是这样的，不要着急运行，点左边的文件夹打开<br/> ![](https://img.722227.xyz/file/5e45a496df34108a5564e.jpg)<br/> <br/>接着点上面的装载谷歌云端硬盘<br/> ![](https://img.722227.xyz/file/875370560e07df4b52639.jpg)<br/> <br/>将滑块（有两层，最外层）拉到最下方，点上移单元格，然后执行<br/> ![](https://img.722227.xyz/file/f713778e72cb5f324ff2e.jpg)<br/>执行后会弹出一个验证，连接到谷歌云盘。<br/> <br/>验证后点文件下面的刷新按钮（不是刷新网页）<br/>等待片刻，就会出现drive的目录，将开始上传的VAE拖拽到SD的VAE目录（移动）<br/> ![](https://img.722227.xyz/file/2f46b4a7641efc18c027a.jpg)<br/> <br/>最后点击运行这个单元格开始安装相关依赖和程序<br/> ![](https://img.722227.xyz/file/5f9b18e66b90398fc6192.jpg)<br/> <br/>经过漫长的等待，最后会生成几个网址，指向本次搭的SD服务<br/> ![](https://img.722227.xyz/file/6ac4f3a1dfd88773922dc.jpg)<br/>[当然是建议https]<br/> <br/> **开始使用**<br/> <br/>点开刚生成的任意一个链接（不建议多人使用）<br/> ![](https://img.722227.xyz/file/34b3467c57c34eb2d5429.jpg)<br/>[搭建成功应该是这样]<br/> <br/>先加载SD VAE，刚我们从谷歌盘拉过来的那个。<br/> ![](https://img.722227.xyz/file/dc857dbc6bc1c0ce69dc6.jpg)<br/>【注意】没有的话点旁边的刷新<br/> <br/>接着我们打开civitai，找个喜欢的模型，比如ChilloutMix，如果你看不到说明没有登录，里面含有NSFW内容，默认是不给显示的。<br/>复制这个名称回到SDwebui，在Civitai按照图示依次完成搜索到下载，注意中间有进度条要等待，开始下载后在colab后台能看到进度。<br/> ![](https://img.722227.xyz/file/36badf4ae723e14f6c800.jpg)<br/>（这个模型看你自己需要来决定是否备份到谷歌云盘，停止程序后可以使用copy命令完成备份，在我看来谷歌盘要快得多）<br/> <br/>又是经过漫长的等待，回到SDwebui的主界面，与配置SD VAE一样，载入下载好的主模型（checkpoint）<br/> ![](https://img.722227.xyz/file/c5b3164329e0f875f0604.jpg)<br/>如此一来就可以开始我们的绘图之旅<br/> <br/> **开始绘图**<br/> <br/>先熟悉主界面的几个功能<br/> ![](https://img.722227.xyz/file/1fff49be8721c7e2b7498.jpg)<br/>txt2img 文生图<br/>img2img 图生图，好处是有一定的可控性，比如色彩比如构图<br/>image Browser 图片浏览（已经完成的图片）<br/>Extras 通常执行批量ai放大<br/>-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br/>CivitAi 模型站<br/>Hugging Face 需要token，可以直接从上面下开头那个VAE<br/>-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br/>Setting 设置<br/>Extensions 插件<br/>Train 训练<br/> <br/> 流程：<br/>打开CivitAi找喜欢的模型，载入到SDwebui中，紧接着在模型下方的展示页面里，物色几张好看的图，点入右下角找提示词<br/>将刚刚的Prompt和Negative Prompt填入框中，Prompt为想要的关键词，Negative Prompt为不想要的关键词。<br/> ![](https://img.722227.xyz/file/f4b0d4260f6de67d047d1.jpg)<br/> <br/>根据需要选择适当的method，steps，CFG以及尺寸。<br/> ![](https://img.722227.xyz/file/567ac6eb36fc04839dc30.jpg)<br/>这里注意尺寸越大速度越慢，并且后续会执行ai放大，建议设置为1500以内，需要快速出图的，请设置在1000以内，并控制步数在20左右。<br/>最后点击generate生成就可以了<br/> <br/>同样的，可以在colab后台看到进度<br/> ![](https://img.722227.xyz/file/3def1cb2e75b92ee9d63b.jpg)<br/> <br/>完成后，继续点击send to img2img进行放大<br/> ![](https://img.722227.xyz/file/525cc724a71ec80c8713f.jpg)<br/> <br/>依次在底部script选择SD upscale，根据需要调整下方的Scale Factor（2即为两倍放大）<br/>Upscaler建议勾选R-ESRGAN 4x+，其余参数请自行尝试。<br/> ![](https://img.722227.xyz/file/5e48ee5ebda980e9ab4d3.jpg)<br/>上方的Denoising strength建议根据模型调整至适当的值，有说法值越高，程序参与改动越多，比如破图。<br/>最后点击生成，等待结果<br/> ![](https://img.722227.xyz/file/878bcf0a8cfbed65e2dd2.png)<br/>【非常重要】过高的尺寸将大幅提升计算时间，甚至造成绘图失败<br/> <br/> **Lora的使用**<br/> <br/>简单解释下，一般几种模型可以这么理解：checkpoint为主模型，决定整张图的艺术风格，VAE相当于配色影响图片质感。而Lora则可以当作辅助模型，它可以是雷电将军，也可以是八重樱，可以是奥特曼，也可以是孙悟空，记录了素材的特征，根据这些特征以checkpoint的艺术风格生成图片。<br/>并且Lora是可以自己训练的，难度不高。<br/> <br/>同样，我们需要去CivitAi找喜欢的Lora模型，复制名称回到SDwebui，和checkpoint一样，务必在搜索之前勾选Lora<br/> ![](https://img.722227.xyz/file/36ab2b5abcbe82a8c27aa.jpg)<br/> <br/>回到主界面，在下方点开Additional Networks，刷新模型，直接第一个模型下拉找到刚下好的Lora（没有说明你没下好），选中后务必勾选Enable。<br/> ![](https://img.722227.xyz/file/5b2e361d2cb57d60e941c.jpg)<br/>如法炮制，仅供参考<br/> ![](https://img.722227.xyz/file/34b2ad6d8f8650ea4cc5c.png) |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |

  |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
